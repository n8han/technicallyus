<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>AppletProject.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> spde

<span class="keyword">import</span> sbt._

<span class="keyword">trait</span> <a title="trait AppletProject extends sbt.BasicScalaProject with spde.SpdeProject with sbt.BasicPackagePaths with archetect.TemplateTasks with ScalaObject" id="6200">AppletProject</a> <span class="keyword">extends</span> <a href="SpdeProject.scala.html#6171" title="spde.SpdeProject">SpdeProject</a> <span class="keyword">with</span> <a title="sbt.BasicPackagePaths" id="11737">BasicPackagePaths</a> <span class="keyword">with</span> archetect.<a href="ArchetectProject.scala.html#6212" title="archetect.TemplateTasks">TemplateTasks</a>
{
  <span class="comment">// this project's Proguard invocation tasks are derived from sbt.LoaderProject</span>
  <span class="keyword">import</span> java.io.File
  <span class="keyword">val</span> <a title="sbt.Path" id="13159">appletOutput</a> = <a href="#6200" title="=&gt; sbt.Path">outputPath</a> <span title="(String)sbt.Path">/</span> <span title="java.lang.String(&quot;applet&quot;)" class="string">&quot;applet&quot;</span>
  <span class="keyword">val</span> <a title="sbt.Path" id="13161">proguardConfigurationPath</a>: <a title="sbt.Path" id="10135">Path</a> = <a href="#6200" title="=&gt; sbt.Path">outputPath</a> <span title="(String)sbt.Path">/</span> <span title="java.lang.String(&quot;proguard.pro&quot;)" class="string">&quot;proguard.pro&quot;</span>
  <span class="keyword">def</span> <a title="(String)java.lang.String" id="13163">outputExt</a>(<a title="String" id="19474">ext</a>: <a title="String" id="1802">String</a>) = <a href="#6200" title="=&gt; String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-applet-&quot;)" class="string">&quot;-applet-&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#6200" title="=&gt; sbt.Version" id="12464">version</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19474" title="String">ext</a>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="sbt.Path" id="13165">outputJar</a> = <a href="#13159" title="=&gt; sbt.Path">appletOutput</a> <span title="(String)sbt.Path">/</span> <a href="#13163" title="(String)java.lang.String">outputExt</a>(<span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="sbt.Path" id="13167">outputJp</a> = <a href="#6200" title="=&gt; sbt.Path">outputPath</a> <span title="(String)sbt.Path">/</span> <a href="#13163" title="(String)java.lang.String">outputExt</a>(<span title="java.lang.String(&quot;jp&quot;)" class="string">&quot;jp&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="sbt.Path" id="13169">outputJpgz</a> = <a href="#13159" title="=&gt; sbt.Path">appletOutput</a> <span title="(String)sbt.Path">/</span> <a href="#13163" title="(String)java.lang.String">outputExt</a>(<span title="java.lang.String(&quot;jpgz&quot;)" class="string">&quot;jpgz&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="sbt.Path" id="13171">outputHtml</a> = <a href="#13159" title="=&gt; sbt.Path">appletOutput</a> <span title="(String)sbt.Path">/</span> (<a href="#6200" title="=&gt; String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.html&quot;)" class="string">&quot;.html&quot;</span>)
  
  <span class="keyword">def</span> <a title="=&gt; sbt.Path" id="13172">rootProjectDirectory</a> = <a href="#6200" title="=&gt; sbt.Project" id="12501">rootProject</a>.<a title="=&gt; sbt.ProjectInfo" id="12462">info</a>.<a title="=&gt; sbt.Path" id="13216">projectPath</a>

  <span class="comment">/****** Dependencies  *******/</span>
  <span class="keyword">val</span> <a title="sbt.Configuration" id="13173">toolsConfig</a> = <a href="#6200" title="(String)sbt.Configuration" id="12969">config</a>(<span title="java.lang.String(&quot;tools&quot;)" class="string">&quot;tools&quot;</span>)
  <span class="keyword">val</span> <a title="sbt.Configuration" id="13175">defaultConfig</a> = <a title="object sbt.Configurations" id="9248">Configurations</a>.<a title="=&gt; sbt.Configuration" id="17404">Default</a>
  <span class="keyword">val</span> <a title="sbt.ModuleID" id="13177">proguardJar</a> = <a href="#6200" title="implicit sbt.ManagedProject.toGroupID : (String)sbt.GroupID" id="12966" class="string">&quot;net.sf.proguard&quot;</a> <a title="(String)sbt.GroupArtifactID" id="13839">%</a> <span title="java.lang.String(&quot;proguard&quot;)" class="string">&quot;proguard&quot;</span> <a href="#6200" title="implicit sbt.ManagedProject.moduleIDConfigurable : (sbt.ModuleID)sbt.ModuleIDConfigurable" id="15039">%</a> <span title="java.lang.String(&quot;4.3&quot;)" class="string">&quot;4.3&quot;</span> <a title="(String)sbt.ModuleID" id="15042">%</a> <span title="java.lang.String(&quot;tools-&gt;default&quot;)" class="string">&quot;tools-&gt;default&quot;</span>
  
  <span class="comment">/******** Proguard *******/</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AppletProject.this.Task" id="13180">proguard</a> = <a href="#13189" title="=&gt; AppletProject.this.Task">proguardTask</a> <span title="(AppletProject.this.ManagedTask*)AppletProject.this.Task">dependsOn</span>(<a href="#6200" title="=&gt; AppletProject.this.Task">`package`</a>, <a href="SpdeProject.scala.html#13153" title="=&gt; AppletProject.this.Task">glob</a>, <a href="#13181" title="=&gt; AppletProject.this.Task">writeProguardConfiguration</a>)
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AppletProject.this.Task" id="13182">writeProguardConfiguration</a> = <a href="#13191" title="=&gt; AppletProject.this.Task">writeProguardConfigurationTask</a> <span title="(AppletProject.this.ManagedTask*)AppletProject.this.Task">dependsOn</span> <a href="#6200" title="=&gt; AppletProject.this.Task">`package`</a>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AppletProject.this.Task" id="13184">pack</a> = <a href="#13192" title="=&gt; AppletProject.this.Task">packTask</a> <span title="(AppletProject.this.ManagedTask*)AppletProject.this.Task">dependsOn</span>(<a href="#13179" title="=&gt; AppletProject.this.Task">proguard</a>)
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AppletProject.this.Task" id="13186">writeHtml</a> = <a href="#13194" title="=&gt; AppletProject.this.Task">writeHtmlTask</a> <span title="(AppletProject.this.ManagedTask*)AppletProject.this.Task">dependsOn</span>(<a href="SpdeProject.scala.html#13153" title="=&gt; AppletProject.this.Task">glob</a>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AppletProject.this.Task" id="13188">applet</a> = (<a href="#13195" title="=&gt; AppletProject.this.Task">appletTask</a> <span title="(AppletProject.this.ManagedTask*)AppletProject.this.Task">dependsOn</span> (<a href="#13183" title="=&gt; AppletProject.this.Task">pack</a>, <a href="#13185" title="=&gt; AppletProject.this.Task">writeHtml</a>) <a title="(String)AppletProject.this.Task" id="12595">describedAs</a>
    <span title="java.lang.String(&quot;Generate an optimized and compressed applet jar and html file in target/applet&quot;)" class="string">&quot;Generate an optimized and compressed applet jar and html file in target/applet&quot;</span>)
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; AppletProject.this.Task" id="13189">proguardTask</a> = <a href="#6200" title="(sbt.ProductsSources)(=&gt; Option[String])AppletProject.this.Task">fileTask</a>(<a href="#6200" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">outputJar</a> <span title="(sbt.PathFinder)sbt.ProductsSources">from</span> <a href="SpdeProject.scala.html#13141" title="=&gt; sbt.Path">sourceGlob</a>) {
    <span title="object sbt.FileUtilities">FileUtilities</span>.<a title="(Iterable[sbt.Path],sbt.Logger)Option[String]" id="16347">clean</a>(<a href="#13164" title="=&gt; sbt.Path">outputJar</a> <a href="#19496" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#6200" title="=&gt; sbt.Logger">log</a>)
    <span class="keyword">val</span> <a title="String" id="19491">proguardClasspathString</a> = <span title="object sbt.Path">Path</span>.<a title="(Iterable[sbt.Path])String" id="13879">makeString</a>(<a href="#6200" title="(sbt.Configuration)sbt.PathFinder" id="12824">managedClasspath</a>(<a href="#13173" title="=&gt; sbt.Configuration">toolsConfig</a>).<span title="=&gt; scala.collection.Set[sbt.Path]">get</span>)
    <span class="keyword">val</span> <a title="java.lang.String" id="19492">configFile</a> = <a href="#13161" title="=&gt; sbt.Path">proguardConfigurationPath</a>.<a title="()java.lang.String" id="5726">toString</a>
    <span class="keyword">val</span> <a title="Int" id="19493">exitValue</a> = <a title="(String,Seq[String])sbt.ProcessBuilder" id="11270">Process</a>(<span title="java.lang.String(&quot;java&quot;)" class="string">&quot;java&quot;</span>, <a title="(java.lang.String*)List[java.lang.String]" id="492">List</a>(<span title="java.lang.String(&quot;-Xmx256M&quot;)" class="string">&quot;-Xmx256M&quot;</span>, <span title="java.lang.String(&quot;-cp&quot;)" class="string">&quot;-cp&quot;</span>, <a href="#19491" title="String">proguardClasspathString</a>, <span title="java.lang.String(&quot;proguard.ProGuard&quot;)" class="string">&quot;proguard.ProGuard&quot;</span>, <span title="java.lang.String(&quot;@&quot;)" class="string">&quot;@&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19492" title="java.lang.String">configFile</a>)) <a title="(sbt.Logger)Int" id="19593">!</a> <a href="#6200" title="=&gt; sbt.Logger">log</a>
    <span title="Option[String]" class="keyword">if</span>(<a href="#19493" title="Int">exitValue</a> <a title="(Int)Boolean" id="3085">==</a> <span title="Int(0)" class="int">0</span>) <span title="object None">None</span> <span class="keyword">else</span> <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;Proguard failed with nonzero exit code (&quot;)" class="string">&quot;Proguard failed with nonzero exit code (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19493" title="Int">exitValue</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
  }
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; (Any, Any, List[java.lang.String])" id="13190">renderInfo</a> = {
    <span class="comment">// tasks that call here should depend on glob</span>
    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="19938">sz</a> = <span title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" class="string">&quot;&quot;&quot;(?s).*size\s*\(\s*(\d+)\s*,\s*(\d+),?\s*(\S*)\s*\).*&quot;&quot;&quot;</span>.<a title="=&gt; scala.util.matching.Regex" id="14311">r</a>
    <span class="keyword">val</span> <a title="Option[String]" id="19939">sz_line</a> = io.<a title="object scala.io.Source" id="17013">Source</a>.<a title="(java.io.File)scala.io.Source" id="17089">fromFile</a>(<a href="SpdeProject.scala.html#13141" title="=&gt; sbt.Path">sourceGlob</a>.<span title="=&gt; java.io.File">asFile</span>).<a title="=&gt; Iterator[String]" id="17070">getLines</a>.<a title="((String) =&gt; Boolean)Option[String]" id="17245">find</a>(<span title="object None">None</span> <a title="(AnyRef)Boolean" id="5734">!=</a> <a href="#19938" title="scala.util.matching.Regex">sz</a>.<a title="(java.lang.CharSequence)Option[String]" id="19280">findFirstIn</a>(<a href="#19949" title="String">_</a>))
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[java.lang.String,java.lang.String]" id="19940">rendererMap</a> = <span title="((java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span> (
      <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;P3D&quot;</span> <span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;processing.core.PGraphics3D&quot;)" class="string">&quot;processing.core.PGraphics3D&quot;</span>,
      <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;JAVA2D&quot;</span> <span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;processing.core.PGraphicsJava2D&quot;)" class="string">&quot;processing.core.PGraphicsJava2D&quot;</span>,
      <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;OPENGL&quot;</span><span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;processing.opengl.PGraphicsOpenGL&quot;)" class="string">&quot;processing.opengl.PGraphicsOpenGL&quot;</span>,
      <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;PDF&quot;</span><span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;processing.pdf.PGraphicsPDF&quot;)" class="string">&quot;processing.pdf.PGraphicsPDF&quot;</span>,
      <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;DXF&quot;</span><span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;processing.dxf.RawDXF&quot;)" class="string">&quot;processing.dxf.RawDXF&quot;</span>
    )
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="19941">univRenderers</a> = <span title="java.lang.String(&quot;processing.core.PGraphicsJava2D&quot;)" class="string">&quot;processing.core.PGraphicsJava2D&quot;</span> <a href="#20008" title="(java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span>
    
    <a href="#19939" title="Option[String]">sz_line</a> <span title="(Any, Any, List[java.lang.String])" class="keyword">match</span> {
      <span title="(String, String, List[java.lang.String])" class="keyword">case</span> Some(<a href="#19938" title="(Any)Option[List[String]]">sz</a>(<a title="String" id="20012">width</a>, <a title="String" id="20013">height</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)) =&gt; <span title="(String,String,List[java.lang.String])(String, String, List[java.lang.String])">(</span><a href="#20012" title="String">width</a>, <a href="#20013" title="String">height</a>, <a href="#19941" title="List[java.lang.String]">univRenderers</a>)
      <span title="(String, String, List[java.lang.String])" class="keyword">case</span> Some(<a href="#19938" title="(Any)Option[List[String]]">sz</a>(<a title="String" id="20018">width</a>, <a title="String" id="20019">height</a>, <a title="String" id="20020">r</a>)) =&gt; <span title="(String,String,List[java.lang.String])(String, String, List[java.lang.String])">(</span><a href="#20018" title="String">width</a>, <a href="#20019" title="String">height</a>, <a href="#19940" title="(java.lang.String)java.lang.String" id="20037">rendererMap</a>(<a href="#20020" title="String">r</a>) <a href="#20024" title="(java.lang.String)List[java.lang.String]">::</a> <a href="#19941" title="List[java.lang.String]">univRenderers</a>)
      <span title="(String, String, List[java.lang.String])" class="keyword">case</span> Some(<a href="#19938" title="(Any)Option[List[String]]">sz</a>(<a title="String" id="20058">width</a>, <a title="String" id="20059">height</a>)) =&gt; <span title="(String,String,List[java.lang.String])(String, String, List[java.lang.String])">(</span><a href="#20058" title="String">width</a>, <a href="#20059" title="String">height</a>, <a href="#19941" title="List[java.lang.String]">univRenderers</a>)
      <span title="(Int, Int, List[java.lang.String])" class="keyword">case</span> _ =&gt; <span title="(Int,Int,List[java.lang.String])(Int, Int, List[java.lang.String])">(</span><span title="Int(100)" class="int">100</span>, <span title="Int(100)" class="int">100</span>, <a href="#19941" title="List[java.lang.String]">univRenderers</a>)
    }
  }
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; AppletProject.this.Task" id="13191">writeProguardConfigurationTask</a> = 
    <a href="#6200" title="(sbt.ProductsSources)(=&gt; Option[String])AppletProject.this.Task">fileTask</a>(<a href="#6200" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">proguardConfigurationPath</a> <span title="(sbt.PathFinder)sbt.ProductsSources">from</span> <a href="SpdeProject.scala.html#13141" title="=&gt; sbt.Path">sourceGlob</a>)
    {
      <span class="comment">// the template for the proguard configuration file</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="19635">outTemplate</a> = <span title="java.lang.String(&quot;\012        |-dontobfuscate\012        |-dontnote\012        |-dontwarn\012        |-libraryjars %s\012        |%s\012        |-outjars %s\012        |-ignorewarnings\012        |-keep class %s\012        |-keep class MyRunner { *** main(...); }\012        |-keep class processing.core.PApplet { *** main(...); }\012        |-keep class spde.core.SApplet { *** scripty(...); }\012        |-keepclasseswithmembers class * { public void dispose(); }\012        |&quot;)" class="string">&quot;&quot;&quot;
        |-dontobfuscate
        |-dontnote
        |-dontwarn
        |-libraryjars %s
        |%s
        |-outjars %s
        |-ignorewarnings
        |-keep class %s
        |-keep class MyRunner { *** main(...); }
        |-keep class processing.core.PApplet { *** main(...); }
        |-keep class spde.core.SApplet { *** scripty(...); }
        |-keepclasseswithmembers class * { public void dispose(); }
        |&quot;&quot;&quot;</span>
      
      <span class="keyword">val</span> <a title="java.lang.String" id="19636">defaultJar</a> = (<a href="#6200" title="=&gt; sbt.Path">outputPath</a> <span title="(String)sbt.Path">/</span> <a href="#6200" title="=&gt; java.lang.String" id="13116">defaultJarName</a>).<span title="=&gt; java.io.File">asFile</span>.<a title="()java.lang.String" id="14987">getAbsolutePath</a>
      <a href="#6200" title="=&gt; sbt.Logger">log</a>.<span title="(=&gt; String)Unit">debug</span>(<span title="java.lang.String(&quot;proguard configuration using main jar &quot;)" class="string">&quot;proguard configuration using main jar &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19636" title="java.lang.String">defaultJar</a>)
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="19637">externalDependencies</a> = <a title="(java.io.File*)scala.collection.immutable.Set[java.io.File]" id="5931">Set</a>() <a title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]" id="18997">++</a> (
        <a href="#6200" title="=&gt; sbt.CompileConditional" id="11869">mainCompileConditional</a>.<a title="=&gt; AppletProject.this.mainCompileConditional.AnalysisType" id="19698">analysis</a>.<a title="=&gt; scala.collection.Set[java.io.File]" id="19855">allExternals</a> <a title="(Iterable[java.io.File])Collection[java.io.File]" id="13692">++</a> <a href="#6200" title="=&gt; sbt.PathFinder" id="11891">compileClasspath</a>.<span title="=&gt; scala.collection.Set[sbt.Path]">get</span>.<a title="((sbt.Path) =&gt; java.io.File)Iterable[java.io.File]" id="13694">map</a> { <a href="#19898" title="sbt.Path">_</a>.<span title="=&gt; java.io.File">asFile</span> }
      ) <a title="((java.io.File) =&gt; java.io.File)scala.collection.immutable.Set[java.io.File]" id="19009">map</a> { <a href="#19907" title="java.io.File">_</a>.<a title="()java.io.File" id="14988">getAbsoluteFile</a> } <a title="((java.io.File) =&gt; Boolean)scala.collection.immutable.Set[java.io.File]" id="19013">filter</a> {  <a href="#19910" title="java.io.File">_</a>.<span title="()java.lang.String">getName</span>.<a title="(java.lang.String)Boolean" id="5783">endsWith</a>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>) }
      
      <span class="keyword">def</span> <a title="(Any)java.lang.String" id="19638">quote</a>(<a title="Any" id="19911">s</a>: <a title="Any" id="28">Any</a>) = <span title="Char('&quot;')" class="char">'&quot;'</span> <a title="(java.lang.String)java.lang.String" id="2924">+</a> <a href="#19911" title="Any">s</a>.<a title="()java.lang.String" id="3444">toString</a> <span title="(Any)java.lang.String">+</span> <span title="Char('&quot;')" class="char">'&quot;'</span>
      <a href="#6200" title="=&gt; sbt.Logger">log</a>.<span title="(=&gt; String)Unit">debug</span>(<span title="java.lang.String(&quot;proguard configuration external dependencies: \012\011&quot;)" class="string">&quot;proguard configuration external dependencies: \n\t&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19637" title="scala.collection.immutable.Set[java.io.File]">externalDependencies</a>.<span title="(String)String">mkString</span>(<span title="java.lang.String(&quot;\012\011&quot;)" class="string">&quot;\n\t&quot;</span>))
      <span class="comment">// partition jars from the external jar dependencies of this project by whether they are located in the project directory</span>
      <span class="comment">// if they are, they are specified with -injars, otherwise they are specified with -libraryjars</span>
      <span class="keyword">val</span> <a href="#14780" title="(List[java.io.File], List[java.io.File])" id="1323">(</a><a href="#19639" title="List[java.io.File]" id="14780">externalJars</a>, <a href="#19639" title="List[java.io.File]" id="14782">libraryJars</a>) = <a href="#19637" title="scala.collection.immutable.Set[java.io.File]">externalDependencies</a>.<a title="=&gt; List[java.io.File]" id="13727">toList</a>.<a title="((java.io.File) =&gt; Boolean)(List[java.io.File], List[java.io.File])" id="13290">partition</a>(<a title="java.io.File" id="19916">jar</a> =&gt; <span title="object sbt.Path">Path</span>.<a title="(sbt.Path,java.io.File)Option[sbt.Path]" id="13891">relativize</a>(<a href="#13172" title="=&gt; sbt.Path">rootProjectDirectory</a>, <a href="#19916" title="java.io.File">jar</a>).<a title="=&gt; Boolean" id="16232">isDefined</a>)
      <a href="#6200" title="=&gt; sbt.Logger">log</a>.<span title="(=&gt; String)Unit">debug</span>(<span title="java.lang.String(&quot;proguard configuration library jars locations: &quot;)" class="string">&quot;proguard configuration library jars locations: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#14782" title="List[java.io.File]">libraryJars</a>.<span title="(String)String">mkString</span>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>))
      <span class="comment">// exclude properties files and manifests from scala-library jar</span>
      <span class="keyword">val</span> <a title="String" id="19642">inJars</a> = (<a href="#19638" title="(Any)java.lang.String">quote</a>(<a href="#19636" title="java.lang.String">defaultJar</a>) <a href="#19925" title="(java.lang.String)List[java.lang.String]">::</a> <a href="#14780" title="List[java.io.File]">externalJars</a>.<span title="((java.io.File) =&gt; java.lang.String)List[java.lang.String]">map</span>(<a href="#19638" title="(Any)java.lang.String">quote</a>(<a href="#19928" title="java.io.File">_</a>) <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(!META-INF/**,!*.txt)&quot;)" class="string">&quot;(!META-INF/**,!*.txt)&quot;</span>)).<span title="((java.lang.String) =&gt; java.lang.String)List[java.lang.String]">map</span>(<span title="java.lang.String(&quot;-injars &quot;)" class="string">&quot;-injars &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19934" title="java.lang.String">_</a>).<span title="(String)String">mkString</span>(<span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
      
      <span class="keyword">val</span> <a href="#14743" title="(Any, Any, List[java.lang.String])">(</a><a href="#19643" title="Any" id="14743">width</a>, <a href="#19643" title="Any" id="14745">height</a>, <a href="#19643" title="List[java.lang.String]" id="14747">renderers</a>) = <a href="#13190" title="=&gt; (Any, Any, List[java.lang.String])">renderInfo</a>
      
      <span class="keyword">val</span> <a title="java.lang.String" id="19647">proguardConfiguration</a> =
        <a href="#19635" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">outTemplate</a>.<a title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="14049">stripMargin</a>.<span title="(Any*)String">format</span>(<a href="#14782" title="List[java.io.File]">libraryJars</a>.<span title="((java.io.File) =&gt; java.lang.String)List[java.lang.String]">map</span>(<a href="#19638" title="(Any)java.lang.String">quote</a>).<span title="(String)String">mkString</span>(<a title="object java.io.File" id="3617">File</a>.<a title="java.lang.String" id="14975">pathSeparator</a>),
          <a href="#19642" title="String">inJars</a>, <a href="#19638" title="(Any)java.lang.String">quote</a>(<a href="#13164" title="=&gt; sbt.Path">outputJar</a>.<a title="=&gt; String" id="13871">absolutePath</a>), <a href="#6200" title="=&gt; String">name</a>) <span title="(Any)java.lang.String">+</span> <a href="#14747" title="List[java.lang.String]">renderers</a>.<span title="((java.lang.String) =&gt; String)List[String]">map</span> { <a title="java.lang.String" id="20125">renderer</a> =&gt;
            <span title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" class="string">&quot;-keep class %s { *** &lt;init&gt;(...); }\n&quot;</span> <span title="(Any*)String">format</span> <a href="#20125" title="java.lang.String">renderer</a>
          }.<a title="=&gt; String" id="13732">mkString</a>
      <a href="#6200" title="=&gt; sbt.Logger">log</a>.<span title="(=&gt; String)Unit">debug</span>(<span title="java.lang.String(&quot;Proguard configuration written to &quot;)" class="string">&quot;Proguard configuration written to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#13161" title="=&gt; sbt.Path">proguardConfigurationPath</a>)
      <span title="object sbt.FileUtilities">FileUtilities</span>.<a title="(java.io.File,String,sbt.Logger)Option[String]" id="16353">write</a>(<a href="#13161" title="=&gt; sbt.Path">proguardConfigurationPath</a>.<span title="=&gt; java.io.File">asFile</span>, <a href="#19647" title="java.lang.String">proguardConfiguration</a>, <a href="#6200" title="=&gt; sbt.Logger">log</a>)
    }
    <span class="keyword">def</span> <a title="=&gt; AppletProject.this.Task" id="13192">packTask</a> = <a href="#6200" title="(sbt.ProductsSources)(=&gt; Option[String])AppletProject.this.Task">fileTask</a>(<a href="#6200" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">outputJpgz</a> <span title="(sbt.PathFinder)sbt.ProductsSources">from</span> <a href="#13164" title="=&gt; sbt.Path">outputJar</a>) {
      <a title="object sbt.Pack" id="6803">Pack</a>.<a title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]" id="20155">pack</a>(<a href="#13164" title="=&gt; sbt.Path">outputJar</a>, <a href="#13166" title="=&gt; sbt.Path">outputJp</a>, <a href="#6200" title="=&gt; sbt.Logger">log</a>) <a title="(=&gt; Option[String])Option[String]" id="16244">orElse</a>
        <span title="object sbt.FileUtilities">FileUtilities</span>.<a title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]" id="16298">gzip</a>(<a href="#13166" title="=&gt; sbt.Path">outputJp</a>, <a href="#13168" title="=&gt; sbt.Path">outputJpgz</a>, <a href="#6200" title="=&gt; sbt.Logger">log</a>)
    }
    <span class="keyword">def</span> <a title="=&gt; Map[String,Any]" id="13193">templateMappings</a> = <a href="#13190" title="=&gt; (Any, Any, List[java.lang.String])">renderInfo</a> <span title="Map[String,Any]" class="keyword">match</span> {
      <span title="scala.collection.immutable.Map[java.lang.String,Any]" class="keyword">case</span> (<a title="Any" id="20935">width</a>, <a title="Any" id="20936">height</a>, _)  =&gt; <span title="((java.lang.String, Any)*)scala.collection.immutable.Map[java.lang.String,Any]">Map</span>(
        <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;width&quot;</span> <span title="(Any)(java.lang.String, Any)">-&gt;</span> <a href="#20935" title="Any">width</a>, 
        <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;height&quot;</span> <span title="(Any)(java.lang.String, Any)">-&gt;</span> <a href="#20936" title="Any">height</a>,
        <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;sketch&quot;</span> <span title="(String)(java.lang.String, String)">-&gt;</span> <a href="#6200" title="=&gt; String">name</a>,
        <span title="(java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;archive&quot;</span> <span title="(java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <a href="#13164" title="=&gt; sbt.Path">outputJar</a>.<span title="=&gt; java.io.File">asFile</span>.<span title="()java.lang.String">getName</span>
      )
    }
    <span class="keyword">def</span> <a title="=&gt; AppletProject.this.Task" id="13194">writeHtmlTask</a> = <a href="ArchetectProject.scala.html#13203" title="(String,sbt.Path)AppletProject.this.Task">templateTask</a>(<a href="AppletTemplate.scala.html#6194" title="object spde.AppletTemplate">AppletTemplate</a>.<a href="AppletTemplate.scala.html#19453" title="=&gt; java.lang.String">resource</a>, <a href="#13170" title="=&gt; sbt.Path">outputHtml</a>)
    
    <span class="keyword">def</span> <a title="=&gt; AppletProject.this.Task" id="13195">appletTask</a> = <a href="#6200" title="(=&gt; Option[String])AppletProject.this.Task" id="12614">task</a> {
      <span class="keyword">try</span> {
        <span class="keyword">val</span> <a title="java.lang.Class[_]" id="20227">dsk</a> = <a title="object java.lang.Class" id="1614">Class</a>.<a title="(java.lang.String)java.lang.Class[_]" id="3880">forName</a>(<span title="java.lang.String(&quot;java.awt.Desktop&quot;)" class="string">&quot;java.awt.Desktop&quot;</span>)
        <a href="#20227" title="java.lang.Class[_]">dsk</a>.<span title="(java.lang.String,java.lang.Class[_]*)java.lang.reflect.Method">getMethod</span>(<span title="java.lang.String(&quot;browse&quot;)" class="string">&quot;browse&quot;</span>, <span title="java.lang.Class[java.net.URI]">classOf</span>[java.net.URI]).<span title="(Any,java.lang.Object*)java.lang.Object">invoke</span>(
          <a href="#20227" title="java.lang.Class[_]">dsk</a>.<span title="(java.lang.String,java.lang.Class[_]*)java.lang.reflect.Method">getMethod</span>(<span title="java.lang.String(&quot;getDesktop&quot;)" class="string">&quot;getDesktop&quot;</span>).<span title="(Any,java.lang.Object*)java.lang.Object">invoke</span>(<span title="Null(null)" class="keyword">null</span>), <a href="#13170" title="=&gt; sbt.Path">outputHtml</a>.<span title="=&gt; java.io.File">asFile</span>.<a title="()java.net.URI" id="14992">toURI</a>
        )
        <span title="object None">None</span>
      } <span class="keyword">catch</span> {
        <span title="Some[java.lang.String]" class="keyword">case</span> _ =&gt; <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;Unable to open browser. Java 5 VM?&quot;)" class="string">&quot;Unable to open browser. Java 5 VM?&quot;</span>)
      }
    }
}

        </pre>
    </body>
</html>